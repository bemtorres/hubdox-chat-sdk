<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Limpiar Historial</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .test-info {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .test-info h3 {
            margin-top: 0;
            color: #1976d2;
        }
        .test-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .test-info li {
            margin: 5px 0;
        }
        .test-steps {
            background: #fff3e0;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .test-steps h3 {
            margin-top: 0;
            color: #f57c00;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üßπ Test: Limpiar Historial</h1>
        
        <div class="test-info">
            <h3>üìã Objetivo del Test:</h3>
            <p>Verificar que al limpiar el historial, la conversaci√≥n se reinicie completamente desde el punto inicial.</p>
        </div>

        <div class="test-steps">
            <h3>üîç Pasos de Prueba:</h3>
            <ol>
                <li><strong>1.</strong> Abre la consola del navegador (F12)</li>
                <li><strong>2.</strong> Haz clic en el bot√≥n flotante del chat</li>
                <li><strong>3.</strong> Deber√≠as ver la pantalla de registro con dos botones</li>
                <li><strong>4.</strong> Haz clic en "üí¨ Iniciar Chat"</li>
                <li><strong>5.</strong> Escribe algunos mensajes de prueba</li>
                <li><strong>6.</strong> Haz clic en el men√∫ de acciones (‚ãÆ)</li>
                <li><strong>7.</strong> Selecciona "Limpiar historial"</li>
                <li><strong>8.</strong> Confirma la acci√≥n en el modal</li>
                <li><strong>9.</strong> Verifica que vuelva a la pantalla inicial</li>
            </ol>
        </div>

        <div class="test-info">
            <h3>‚úÖ Comportamiento Esperado:</h3>
            <ul>
                <li>‚úÖ Se muestra modal de confirmaci√≥n</li>
                <li>‚úÖ Al confirmar, se limpian todos los mensajes</li>
                <li>‚úÖ Se reinicia el estado de registro</li>
                <li>‚úÖ Se vuelve a mostrar la pantalla de registro con botones</li>
                <li>‚úÖ El input vuelve a estar deshabilitado</li>
                <li>‚úÖ Se puede volver a iniciar el chat desde cero</li>
            </ul>
        </div>

        <div class="test-info">
            <h3>üîß Configuraci√≥n de Prueba:</h3>
            <ul>
                <li><strong>Modo:</strong> Test (sin llamadas a API)</li>
                <li><strong>Registro:</strong> Habilitado</li>
                <li><strong>Cache:</strong> Habilitado (se limpia al limpiar historial)</li>
                <li><strong>Idioma:</strong> Espa√±ol</li>
            </ul>
        </div>
    </div>

    <script src="../src/index.js"></script>
    <script>
        // Configuraci√≥n de prueba
        const chatBot = new ChatBot({
          baseUrl: 'https://hubdocs.test',
          apiKey: 'Ae812043-87ed-4bde-ba4a-0daaff8aadad',
          tenant: 'nomed',
            bot: {
                name: 'Test Bot',
                img: 'https://via.placeholder.com/80x80/007bff/ffffff?text=ü§ñ'
            },
            user: {
                name: 'Test User',
                email: 'test@example.com',
                photo: 'https://via.placeholder.com/40x40/28a745/ffffff?text=üë§'
            },
            register: true,
            cache: true,
            testMode: true,
            primaryColor: '#007bff',
            language: 'es'
        });

        // Inicializar el chat
        chatBot._initializeChat();

        // Log para debugging
        console.log('üöÄ ChatBot inicializado en modo test');
        console.log('üì± Configuraci√≥n:', {
            register: chatBot.register,
            cache: chatBot.cache,
            testMode: chatBot.testMode,
            registrationScreen: chatBot.registrationScreen,
            registered: chatBot.registered,
            registrationCompleted: chatBot.registrationCompleted
        });

        // Funci√≥n para probar limpiar historial program√°ticamente
        window.testClearHistory = function() {
            console.log('üßπ Probando limpiar historial...');
            chatBot.clearHistory();
        };

        // Funci√≥n para verificar estado
        window.checkStatus = function() {
            console.log('üìä Estado actual:', chatBot.getRegistrationStatus());
        };
    </script>
</body>
</html> 