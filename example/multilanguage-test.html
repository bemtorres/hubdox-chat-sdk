<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Multilenguaje - Hubdox Chat SDK</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .feature {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #007bff;
        }
        .feature h3 {
            color: #007bff;
            margin-top: 0;
        }
        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .btn {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .btn:hover {
            background: #0056b3;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #218838;
        }
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        .btn-warning:hover {
            background: #e0a800;
        }
        .btn-danger {
            background: #dc3545;
        }
        .btn-danger:hover {
            background: #c82333;
        }
        .info-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #2196f3;
        }
        .warning-box {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
        }
        .status-display {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 12px;
        }
        .language-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        .language-btn {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .language-btn:hover {
            border-color: #007bff;
            background: #e3f2fd;
        }
        .language-btn.active {
            border-color: #28a745;
            background: #d4edda;
        }
        .language-btn h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
        }
        .language-btn p {
            margin: 0;
            font-size: 12px;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ Test Multilenguaje</h1>
        
        <div class="feature">
            <h3>ğŸŒ Sistema de MÃºltiples Idiomas</h3>
            <p>El chat ahora soporta 7 idiomas diferentes: EspaÃ±ol, InglÃ©s, PortuguÃ©s, Ruso, AlemÃ¡n, Chino y JaponÃ©s.</p>
        </div>

        <div class="info-box">
            <h4>ğŸ“‹ Idiomas Soportados</h4>
            <ul>
                <li><strong>EspaÃ±ol (es):</strong> Idioma por defecto</li>
                <li><strong>InglÃ©s (en):</strong> English</li>
                <li><strong>PortuguÃ©s (pt):</strong> PortuguÃªs</li>
                <li><strong>Ruso (ru):</strong> Ğ ÑƒÑÑĞºĞ¸Ğ¹</li>
                <li><strong>AlemÃ¡n (de):</strong> Deutsch</li>
                <li><strong>Chino (zh):</strong> ä¸­æ–‡</li>
                <li><strong>JaponÃ©s (ja):</strong> æ—¥æœ¬èª</li>
            </ul>
        </div>

        <div class="warning-box">
            <h4>âš ï¸ Importante</h4>
            <p>El cambio de idioma afecta a todos los textos del chat: mensajes de bienvenida, recordatorios, botones, placeholders, etc.</p>
        </div>

        <div class="feature">
            <h3>ğŸ”§ ConfiguraciÃ³n</h3>
            <div class="code-block">
const chat = new ChatBot({
  // ... configuraciÃ³n bÃ¡sica
  custom: {
    language: 'en',  // Cambiar idioma
    // language: 'pt',  // PortuguÃ©s
    // language: 'ru',  // Ruso
    // language: 'de',  // AlemÃ¡n
    // language: 'zh',  // Chino
    // language: 'ja',  // JaponÃ©s
  }
});
            </div>
        </div>

        <div class="language-grid">
            <div class="language-btn" onclick="changeLanguage('es')" id="btn-es">
                <h4>ğŸ‡ªğŸ‡¸ EspaÃ±ol</h4>
                <p>Idioma por defecto</p>
            </div>
            <div class="language-btn" onclick="changeLanguage('en')" id="btn-en">
                <h4>ğŸ‡ºğŸ‡¸ English</h4>
                <p>English language</p>
            </div>
            <div class="language-btn" onclick="changeLanguage('pt')" id="btn-pt">
                <h4>ğŸ‡§ğŸ‡· PortuguÃªs</h4>
                <p>LÃ­ngua portuguesa</p>
            </div>
            <div class="language-btn" onclick="changeLanguage('ru')" id="btn-ru">
                <h4>ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</h4>
                <p>Ğ ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº</p>
            </div>
            <div class="language-btn" onclick="changeLanguage('de')" id="btn-de">
                <h4>ğŸ‡©ğŸ‡ª Deutsch</h4>
                <p>Deutsche Sprache</p>
            </div>
            <div class="language-btn" onclick="changeLanguage('zh')" id="btn-zh">
                <h4>ğŸ‡¨ğŸ‡³ ä¸­æ–‡</h4>
                <p>ä¸­æ–‡è¯­è¨€</p>
            </div>
            <div class="language-btn" onclick="changeLanguage('ja')" id="btn-ja">
                <h4>ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</h4>
                <p>æ—¥æœ¬èª</p>
            </div>
        </div>

        <div class="controls">
            <h3>ğŸ® Controles de Prueba</h3>
            <button class="btn" onclick="initChat()">ğŸŒ Inicializar Chat</button>
            <button class="btn btn-success" onclick="showCurrentLanguage()">ğŸ“Š Ver Idioma Actual</button>
            <button class="btn btn-warning" onclick="testAllLanguages()">ğŸ§ª Probar Todos los Idiomas</button>
            <button class="btn btn-danger" onclick="clearCache()">ğŸ—‘ï¸ Limpiar CachÃ©</button>
        </div>

        <div class="status-display" id="status">
            Estado: Inicializando...
        </div>

        <div class="feature">
            <h3>ğŸ” CÃ³mo Probar</h3>
            <ol>
                <li>Haz clic en "Inicializar Chat" para crear el chat</li>
                <li>Selecciona un idioma haciendo clic en los botones de idioma</li>
                <li>Abre el chat y verÃ¡s que todos los textos cambian al idioma seleccionado</li>
                <li>EnvÃ­a un mensaje para ver el recordatorio en el idioma seleccionado</li>
                <li>Usa "Probar Todos los Idiomas" para ver una demostraciÃ³n automÃ¡tica</li>
            </ol>
        </div>

        <div class="feature">
            <h3>âš™ï¸ MÃ©todos PÃºblicos</h3>
            <div class="code-block">
// Cambiar idioma
chat.setLanguage('en'); // true si es exitoso, false si no

// Obtener idioma actual
const currentLang = chat.getLanguage(); // 'es', 'en', 'pt', etc.

// Obtener idiomas soportados
const supported = chat.getSupportedLanguages();
// ['es', 'en', 'pt', 'ru', 'de', 'zh', 'ja']
            </div>
        </div>

        <!-- Chat Bot -->
        <script src="../src/index.js"></script>
        <script>
            let chat;

            function initChat() {
                if (chat) {
                    chat.destroy();
                }
                
                chat = new ChatBot({
                    baseUrl: 'https://hubdocs.test',
                    apiKey: 'test-key',
                    tenant: 'test',
                    user: {
                        name: 'Test User',
                        email: 'test@example.com'
                    },
                    bot: { 
                        name: 'Bot de Test', 
                        img: "../src/img/bot_icon.png"  
                    },
                    options: {
                        show: true,
                        register: true,
                        cache: true,
                        testMode: true,
                        stream: true,
                        devMode: true,
                    },
                    custom: {
                        primaryColor: "#007bff",
                        botName: "Bot de Test",
                        headerBgColor: "#007bff",
                        headerTextColor: "#fff",
                        showTime: true,
                        sound: true,
                        reminderTimeout: 30000, // 30 segundos para pruebas
                        language: 'es', // Idioma por defecto
                        position: {
                            bottom: "24px",
                            right: "24px"
                        }
                    }
                });
                
                console.log('âœ… Chat inicializado con idioma:', chat.getLanguage());
                updateStatus();
                updateLanguageButtons();
                alert('Chat inicializado. Selecciona un idioma y abre el chat para ver los cambios.');
            }

            function changeLanguage(language) {
                if (!chat) {
                    alert('Primero inicializa un chat');
                    return;
                }

                const success = chat.setLanguage(language);
                if (success) {
                    console.log('âœ… Idioma cambiado a:', language);
                    updateStatus();
                    updateLanguageButtons();
                    alert(`Idioma cambiado a: ${language}\n\nAbre el chat para ver los cambios.`);
                } else {
                    alert('Error al cambiar el idioma');
                }
            }

            function showCurrentLanguage() {
                if (!chat) {
                    alert('Primero inicializa un chat');
                    return;
                }

                const currentLang = chat.getLanguage();
                const supported = chat.getSupportedLanguages();
                
                const statusText = `Idioma Actual: ${currentLang}
Idiomas Soportados: ${supported.join(', ')}`;
                
                alert(statusText);
                console.log('ğŸ“Š Estado del idioma:', { current: currentLang, supported });
            }

            function testAllLanguages() {
                if (!chat) {
                    alert('Primero inicializa un chat');
                    return;
                }

                const languages = chat.getSupportedLanguages();
                let currentIndex = 0;

                function cycleLanguage() {
                    if (currentIndex < languages.length) {
                        const lang = languages[currentIndex];
                        chat.setLanguage(lang);
                        updateLanguageButtons();
                        
                        const langNames = {
                            'es': 'EspaÃ±ol',
                            'en': 'English',
                            'pt': 'PortuguÃªs',
                            'ru': 'Ğ ÑƒÑÑĞºĞ¸Ğ¹',
                            'de': 'Deutsch',
                            'zh': 'ä¸­æ–‡',
                            'ja': 'æ—¥æœ¬èª'
                        };
                        
                        console.log(`ğŸ”„ Cambiando a: ${langNames[lang]}`);
                        currentIndex++;
                        
                        setTimeout(cycleLanguage, 2000);
                    } else {
                        console.log('âœ… Ciclo de idiomas completado');
                        alert('Ciclo de idiomas completado. Abre el chat para ver el idioma final.');
                    }
                }

                cycleLanguage();
            }

            function clearCache() {
                if (chat) {
                    chat.clearCache();
                    console.log('ğŸ—‘ï¸ CachÃ© limpiado');
                    updateStatus();
                    alert('CachÃ© limpiado. El idioma se reiniciarÃ¡ al espaÃ±ol.');
                } else {
                    alert('Primero inicializa un chat');
                }
            }

            function updateStatus() {
                if (chat) {
                    const currentLang = chat.getLanguage();
                    const supported = chat.getSupportedLanguages();
                    
                    document.getElementById('status').innerHTML = `
<strong>Estado Actual:</strong><br>
ğŸŒ Idioma actual: ${currentLang}<br>
ğŸ“š Idiomas soportados: ${supported.join(', ')}<br>
ğŸ’¾ CachÃ© habilitado: ${chat.cache ? 'âœ… SÃ­' : 'âŒ No'}<br>
ğŸ”Š Sonido habilitado: ${chat.sound ? 'âœ… SÃ­' : 'âŒ No'}<br>
â° Recordatorio: ${chat.reminderTimeout / 1000}s
                    `;
                } else {
                    document.getElementById('status').innerHTML = 'Estado: Chat no inicializado';
                }
            }

            function updateLanguageButtons() {
                if (!chat) return;
                
                const currentLang = chat.getLanguage();
                const buttons = ['es', 'en', 'pt', 'ru', 'de', 'zh', 'ja'];
                
                buttons.forEach(lang => {
                    const btn = document.getElementById(`btn-${lang}`);
                    if (btn) {
                        if (lang === currentLang) {
                            btn.classList.add('active');
                        } else {
                            btn.classList.remove('active');
                        }
                    }
                });
            }

            // Inicializar chat por defecto
            window.addEventListener('load', () => {
                initChat();
            });
        </script>
    </div>
</body>
</html> 