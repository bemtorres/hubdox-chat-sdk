<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Simple de Idioma - Hubdox Chat SDK</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .controls {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 5px;
        }
        .btn {
            background: #007bff;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover {
            background: #0056b3;
        }
        .status {
            background: #e9ecef;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåç Test Simple de Idioma</h1>
        
        <div class="controls">
            <button class="btn" onclick="initChat()">üöÄ Inicializar Chat</button>
            <button class="btn" onclick="changeToEnglish()">üá∫üá∏ Ingl√©s</button>
            <button class="btn" onclick="changeToSpanish()">üá™üá∏ Espa√±ol</button>
            <button class="btn" onclick="changeToPortuguese()">üáßüá∑ Portugu√©s</button>
            <button class="btn" onclick="showStatus()">üìä Estado</button>
        </div>
        
        <div class="status" id="status">
            Estado: No inicializado
        </div>
        
        <div style="text-align: center; margin-top: 20px;">
            <p><strong>Instrucciones:</strong></p>
            <ol style="text-align: left; display: inline-block;">
                <li>Haz clic en "Inicializar Chat"</li>
                <li>Abre el chat haciendo clic en el bot√≥n flotante</li>
                <li>Cambia el idioma con los botones</li>
                <li>Verifica que los textos cambien en el chat</li>
            </ol>
        </div>
    </div>

    <script src="../src/index.js"></script>
    <script>
        let chat;

        function initChat() {
            if (chat) {
                chat.destroy();
            }
            
            chat = new ChatBot({
                baseUrl: 'https://hubdocs.test',
                apiKey: 'test-key',
                tenant: 'test',
                user: {
                    name: 'Test User',
                    email: 'test@example.com'
                },
                bot: { 
                    name: 'Bot de Test', 
                    img: "../src/img/bot_icon.png"  
                },
                options: {
                    show: true,
                    register: true,
                    cache: true,
                    testMode: true,
                    stream: false,
                    devMode: true,
                },
                custom: {
                    primaryColor: "#007bff",
                    botName: "Bot de Test",
                    headerBgColor: "#007bff",
                    headerTextColor: "#fff",
                    showTime: true,
                    sound: false,
                    reminderTimeout: 30000,
                    language: 'es',
                    position: {
                        bottom: "24px",
                        right: "24px"
                    }
                }
            });
            
            console.log('‚úÖ Chat inicializado con idioma:', chat.getLanguage());
            updateStatus();
            alert('Chat inicializado. Abre el chat y prueba cambiar el idioma.');
        }

        function changeToEnglish() {
            if (!chat) {
                alert('Primero inicializa un chat');
                return;
            }
            const success = chat.setLanguage('en');
            if (success) {
                console.log('‚úÖ Cambiado a ingl√©s');
                updateStatus();
                alert('Idioma cambiado a ingl√©s. Abre el chat para ver los cambios.');
            } else {
                alert('Error al cambiar idioma');
            }
        }

        function changeToSpanish() {
            if (!chat) {
                alert('Primero inicializa un chat');
                return;
            }
            const success = chat.setLanguage('es');
            if (success) {
                console.log('‚úÖ Cambiado a espa√±ol');
                updateStatus();
                alert('Idioma cambiado a espa√±ol. Abre el chat para ver los cambios.');
            } else {
                alert('Error al cambiar idioma');
            }
        }

        function changeToPortuguese() {
            if (!chat) {
                alert('Primero inicializa un chat');
                return;
            }
            const success = chat.setLanguage('pt');
            if (success) {
                console.log('‚úÖ Cambiado a portugu√©s');
                updateStatus();
                alert('Idioma cambiado a portugu√©s. Abre el chat para ver los cambios.');
            } else {
                alert('Error al cambiar idioma');
            }
        }

        function showStatus() {
            if (!chat) {
                alert('Primero inicializa un chat');
                return;
            }
            
            const currentLang = chat.getLanguage();
            const supported = chat.getSupportedLanguages();
            
            const statusText = `Idioma Actual: ${currentLang}
Idiomas Soportados: ${supported.join(', ')}`;
            
            alert(statusText);
            console.log('üìä Estado del idioma:', { current: currentLang, supported });
        }

        function updateStatus() {
            if (chat) {
                const currentLang = chat.getLanguage();
                const supported = chat.getSupportedLanguages();
                
                document.getElementById('status').innerHTML = `
<strong>Estado Actual:</strong><br>
üåç Idioma: ${currentLang}<br>
üìö Soportados: ${supported.join(', ')}<br>
üíæ Cach√©: ${chat.cache ? '‚úÖ Habilitado' : '‚ùå Deshabilitado'}
                `;
            } else {
                document.getElementById('status').innerHTML = 'Estado: Chat no inicializado';
            }
        }

        // Inicializar chat por defecto
        window.addEventListener('load', () => {
            initChat();
        });
    </script>
</body>
</html> 